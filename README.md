# üìù Writer / Rewriter API Playground

A demo application showcasing Chrome's built-in Writer and Rewriter APIs powered by Gemini Nano. This playground allows you to experiment with AI-powered text generation and rewriting capabilities directly in your browser.

## Features

- **Writer API**: Generate text based on prompts and context
- **Rewriter API**: Modify existing text by adjusting tone or length
- **Streaming responses**: Real-time text generation
- **Context-aware**: Provide shared context for better results
- **Secure**: Runs entirely in your browser with no external API calls

## Requirements

- **Chrome Browser**: Chrome Canary or Chrome Dev (version 127 or later)
- **Early Preview Program**: Join the [Chrome AI Early Preview Program](https://goo.gle/chrome-ai-dev-preview-join)
- **Gemini Nano**: The AI model must be downloaded and enabled in Chrome
- **HTTPS**: Application must run over HTTPS (enforced by the code)

## Installation

1. Clone this repository:
   ```bash
   git clone <repository-url>
   cd writer-rewriter-api-playground
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

## Usage

For "Option 1: Use a Secure Local Server," the recommended and simplest method for modern web development is to use a tool called **mkcert** to generate a locally trusted SSL certificate and then configure a local web server to use it.

This process ensures your local site is served over **HTTPS** (e.g., `https://localhost:8080`), which is the **secure context** required for the Writer/Rewriter API.

Here are the step-by-step instructions:

-----

## Step 1: Install `mkcert` (One-Time Setup)

`mkcert` is a simple tool for creating locally trusted development certificates.

1.  **Install `mkcert`:**

      * **macOS (using Homebrew):**
        ```bash
        brew install mkcert
        ```
      * **Windows (using Chocolatey):**
        ```bash
        choco install mkcert
        ```
      * **Linux/Other:** See the official GitHub repository for detailed instructions based on your distribution.

2.  **Install the Local CA (Certificate Authority):**

      * Run this command to create and install a local Certificate Authority (CA) on your system. This makes your browser **trust** any certificates generated by `mkcert`.
        ```bash
        mkcert -install
        ```

-----

## Step 2: Generate the Certificate for `localhost`

1.  **Navigate to your project directory** (the root of the GitHub example code).
2.  **Generate the certificate files:**
      * Run the following command to create a certificate valid for `localhost`. This will generate two files: `localhost.pem` and `localhost-key.pem`.
        ```bash
        mkcert localhost
        ```
      * *Note: These two files are your public certificate and private key, respectively. They should be kept secret and should **not** be committed to public repositories.*

-----

## Step 3: Serve Your Files over HTTPS

You need a simple local server to serve your files and tell it to use the new certificate. A popular and easy-to-use option is the Node.js package **`http-server`**.

1.  **Install `http-server`** (if you have Node.js/npm installed):

    ```bash
    npm install -g http-server
    ```

2.  **Start the server with HTTPS:**

      * In the same project directory where your files and the certificate files (`localhost.pem`, `localhost-key.pem`) are, run the following command:
        ```bash
        http-server -S -C localhost.pem -K localhost-key.pem
        ```
      * **`-S`** tells it to use HTTPS.
      * **`-C`** specifies the certificate file (`localhost.pem`).
      * **`-K`** specifies the private key file (`localhost-key.pem`).

3.  **Access the example:**

      * The server will typically start on port **8080** by default.
      * Open your browser and navigate to: **`https://localhost:8080`**

You should now see the page load with a secure padlock icon, and the Writer/Rewriter API should be available because the page is running in a **secure context**.

-----

### Alternative: Use the existing setup

1. Start the local server:
   ```bash
   npm start
   ```

2. Open your browser and navigate to:
   ```
   http://localhost:8080
   ```
   (The application will automatically redirect to HTTPS if needed)

3. **Writer Mode**:
   - Enter a prompt (e.g., "Write an email to my bank")
   - Optionally add context for better results
   - Click "üìù Write" to generate text

4. **Rewriter Mode**:
   - After generating text, use the rewrite options to:
     - Adjust tone (more formal/casual)
     - Change length (shorter/longer)
   - Click "‚ôªÔ∏è Rewrite" to regenerate

5. **Copy Results**: Use the "üìã Copy" button to copy generated text to clipboard

## Browser Setup

To enable the Writer/Rewriter API:

1. Download Chrome Canary or Chrome Dev
2. Join the [Early Preview Program](https://goo.gle/chrome-ai-dev-preview-join)
3. Navigate to `chrome://flags/#optimization-guide-on-device-model`
4. Select "Enabled BypassPerfRequirement"
5. Navigate to `chrome://flags/#text-safety-classifier`
6. Select "Disabled"
7. Relaunch Chrome
8. Wait for Gemini Nano to download (check `chrome://components/`)

## How It Works

The application uses Chrome's experimental built-in AI APIs:

- **Writer API**: Creates an AI writer instance with configurable tone, length, and format options
- **Rewriter API**: Creates an AI rewriter instance to modify existing text
- **Streaming**: Both APIs support streaming responses for real-time text generation
- **DOMPurify**: Sanitizes output to prevent XSS attacks

## Technical Details

- **No backend required**: All AI processing happens locally in the browser
- **Privacy-focused**: No data sent to external servers
- **Origin Trial**: Includes origin trial tokens for API access
- **SSL certificates**: Includes localhost certificates for HTTPS development

## License

Apache-2.0

## Author

Thomas Steiner ([@tomayac](https://github.com/tomayac/))

## Resources

- [Chrome Built-in AI Documentation](https://developer.chrome.com/docs/ai/built-in)
- [Web AI Demos on GitHub](https://github.com/GoogleChromeLabs/web-ai-demos)
- [Join Early Preview Program](https://goo.gle/chrome-ai-dev-preview-join)
